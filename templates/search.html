<!DOCTYPE html>
<html lang="en">
<head>
  <title>Image Classification</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>


<body>
    <button style="margin: 10px;" type="button" class="btn btn-primary" onclick="navigateToAdmin2()">回首頁</button>


    <div class="container">
        <h1 class="jumbotron bg-primary" style="text-align: center" >價格搜尋</h1>


    <!-- Add a search input -->
        <div style="margin-bottom: 10px;text-align: center">
            <input type="text" id="searchInput" placeholder="輸入名稱">
            <button onclick="searchByName()">搜尋</button>
        </div>


    <table class="table table-striped" id="priceTable" style="margin: auto;">
        <thead>
            <tr>
                <th scope="col">名稱</th>
                <th scope="col">昨日建議售價</th>
                <th scope="col">今日建議售價</th>
            </tr>
        </thead>
        <tbody>
            {% for pri in price %}
                <tr>
                    <th>{{pri.name}}</th>
                    <th>{{pri.price_up}}</th>
                    <th>{{pri.price_down}}</th>
                </tr>
            {% endfor %}
        </tbody>
    </table>


</div>
    <script>
       function searchByName() {
    // 獲取輸入框的值
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById('searchInput');
    filter = input.value.toUpperCase(); // 將輸入轉為大寫，以不區分大小寫進行搜索
    table = document.getElementById('priceTable'); // 獲取表格元素
    tr = table.getElementsByTagName('tr'); // 獲取表格中的所有行

    // 遍歷表格的每一行
    for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName('th')[0]; // 獲取每一行的第一個單元格（通常是表頭）
        if (td) {
            txtValue = td.textContent || td.innerText; // 獲取表頭單元格的文本內容
            // 檢查表頭單元格的文本是否包含搜索過濾器
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = ''; // 顯示匹配的行
            } else {
                tr[i].style.display = 'none'; // 隱藏不匹配的行
            }
        }
    }
}


        function navigateToAdmin2() {
            window.location.href = "/admin";
        }
    </script>
</body>
</html>
